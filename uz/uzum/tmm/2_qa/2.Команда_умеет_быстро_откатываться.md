# Команда умеет быстро откатываться

## Ожидание от команды

Новые фичи в критичной функциональности команда может быстро откатить или отключить.

## Пример

Выкатываем новую функциональность в продакшен. Мы долго тестировали, но, так как фича объёмная, не досмотрели, что у
некоторых пользователей отдаётся 500-ая ошибка. Мы выключили тоглы/быстро откатили релиз у пользователей восстановлена в
самый короткий срок.

## Зачем эта практика

Для того, что бы вовремя заметить проблемы в новой версии сервиса и при этом уменьшить потери компании, имеет смысл
выкатывать новые сервисы сначала на небольшой процент трафика. Только убедившись, что всё работает как надо, постепенно
увеличивать процент трафика до 100. Также для любой функциональности должна быть возможность быстро откатить или
отключить использование новой фичи в случае проблем.

| Уровень 0        | Нет ничего, нет возможности отката                                                                                                                                                                                                                                                                                                                                                                 |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Как перейти      | - Разобраться, какие практики используются для отката приложений<br/>- Разобраться как откатывать изменения,связанные в изменениями в моделях данных<br/>- Провести учения и научиться откатывать сервис в ручном режиме<br/>- Составить список всех используемых фича-флагов в клиентских приложениях<br/>- Умеем отключать функциональность с временным лагом 12 часов в mobile                  |
| Уровень 1        | Команда умеет откатываться в ручном режиме. Для любых изменений есть план отката.                                                                                                                                                                                                                                                                                                                  |
| Как перейти      | - В DOD команды добавлен пункт о необходимости реализации возможности отката изменений<br/>- Команда умеет откатываться в автоматическом режиме (выкатили релиз -> пошли 500 -> сработал треггер -> релиз откатился)<br/>- Умеем отключать функциональноcть в течении часа в mobile                                                                                                                |
| Уровень 2 (Base) | Команда умеет откатываться в автоматическом режиме                                                                                                                                                                                                                                                                                                                                                 |
| Как перейти      | - Начать использовать подход feature-toggle, все крупные фичи команда запускает с использованием подхода<br/>- Команда использует Подход Shift-Right позволяет тестировать сложные кейсы в продакшене, но только при условии небольшого процента трафика и полностью прозрачных метрик всего бизнес-процесса.<br/>- Автоматическое отключение функциональности (фича-флагов) на основе мониторинга |
| Уровень 3        | Команда освоила технику feature-toggle и Shift-Right, понимает полную картину происходящего в метриках и умеем сокращать скоуп тестирования, осознанно передвигая тестирование «вправо».                                                                                                                                                                                                           |
