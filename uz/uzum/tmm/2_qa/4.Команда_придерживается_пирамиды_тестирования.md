# Команда придерживается пирамиды тестирования

## Ожидание от команды

Ожидаем, что у команды есть юнит-, интреграционные и end-to-end тесты. И что они составляют пирамиду тестирования:
юнитов больше, интеграционных меньше, end-to-end ещё меньше.

## Пример

Команда при разработке новой фичи обсуждает проверки и старается перенести их как можно ниже по уровню пирамиды
тестирования. Команда знает, как выглядит её тестовая модель по уровням и может показать свою пирамиду, а также
регулярно проводит ревью пирамиды и контролирует, что е2е-сценарии не разрастаются.

## Зачем эта практика

Юнит-тесты самые дешевые в разработке и поддержке, поэтому большую часть функционала хочется покрывать ими. Но полностью
обеспечить приемлемый уровень качества используя только юнит тесты, к сожалению, нельзя. Поэтому интеграционных и
end-to-end тесты тоже должны быть.

| Уровень 0        | Команда не знает, что такое пирамида тестирования. У команды отсутствуют тесты как таковые                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Как перейти      | - Разобраться, что такое пирамида тестирования. Проанализировать её на визуализации тестовых моделей.<br/>- На груммингах команда временами задумывается и обсуждает покрытие функциональности тестами и управляет уровнями в пирамиде тестирования<br/>- Команда понимает что нужно проверить вручную в рамках задачи и релизится после аппрува тестирования<br/>- Настроить CI для всей пирамиды тестирования                                                                                                                                                                                                                                                           |
| Уровень 1        | У команды есть pipline для всей пирамиды тестирования, команда испольузет автоматизацию как дополнительный фактор контроля manual тестирования                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Как перейти      | - Команда понимает в каком состоянии текущая пирамида тестирования.<br/>- Ручных проверок не более Т% от всего объёма функциональных проверок.<br/>- Автотестов e2e-уровня составляют не менее X%, команда использует возможности для снижения уровня в пирамиде тестирования. Команда использует моки и не зависит от стабильности сред<br/>- Есть роадмап по улучшению пирамиды тестирования.<br/>- Для новых задач автотесты разрабатываются на разных слоях, подходящих под конкретные проверки/создаются задачи на разработку<br/>- Команда выкатывает изменения без аппрува QA инженера, а главное уверена в этом/не проверяет функционал покрытый e2e тестами<br/> |
| Уровень 2 (Base) | Команда сокращает скоуп тестирования за счет автоматизации и не тестирует повторно покрытые сценарии ручным тестированием                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Как перейти      | - Выявить целевой уровень, довести тесты до пирамиды и поддерживать его<br/>- Выделять время на актуализацию тестов на постоянной основе                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Уровень 3        | Команда придерживается пирамиды тестирования. Автотесты на новые фичи разбиваются на слои пирамиды до разработки. Ручные проверки только на новые фичи, нет фич старше 3 месяцев в проде без тестов                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
